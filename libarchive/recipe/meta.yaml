{% set version = "3.8.2" %}

package:
  name: libarchive
  version: {{ version }}

source:
  url: https://github.com/libarchive/libarchive/releases/download/v{{ version }}/libarchive-{{ version }}.tar.xz
  sha256: db0dee91561cbd957689036a3a71281efefd131d35d1d98ebbc32720e4da58e2

requirements:
  build:
    - {{ compiler('c') }}
    - bzip2-dev
    - libb2-dev
    - libiconv-dev
    - liblzma-dev
    - lz4-dev
    - lzo-dev
    - openssl-dev
    - pcre2-dev
    - pkgconf-tools
    - zlib-dev
    - zstd-dev
  run:
    - libarchive-tools
    - libarchive-runtime
    - libarchive-dev

outputs:
  - name: libarchive-runtime
    files:
      - Library/bin/*.dll
    requirements:
      run:
        - bzip2-runtime
        - libb2-runtime
        - libiconv-runtime
        - liblzma-runtime
        - lz4-runtime
        - lzo-runtime
        - openssl-runtime
        - pcre2-runtime
        - zlib-runtime
        - zstd-runtime
  - name: libarchive-dev
    files:
      - Library/include
      - Library/lib
      - Library/share
    build:
      run_exports:
        - libarchive-runtime
  - name: libarchive-tools
    files:
      - Library/bin/*.exe
    requirements:
      run:
        - libarchive-runtime
